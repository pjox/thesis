%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Quality at a Glance: An Audit of OSCAR 2019 and other Web-Crawled Datasets}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{table}[th!]
    \centering
    \begin{tabular}{lll}
        \toprule
        \textbf{Dataset } & \textbf{Supercode} & \textbf{Subcode(s)}                       \\
        \midrule
        JW300             & \texttt{kg}        & \texttt{kwy}                              \\
        JW300             & \texttt{mg}        & \texttt{tdx}                              \\
        JW300             & \texttt{qu}        & \texttt{que}, \texttt{qug}, \texttt{qus}, \\
                          &                    & \texttt{quw}, \texttt{quy}, \texttt{quz}, \\
                          &                    & \texttt{qvi}, \texttt{qvz}                \\
        JW300             & \texttt{sw}        & \texttt{swc}                              \\
        \midrule
        OSCAR             & \texttt{ar}        & \texttt{arz}                              \\
        OSCAR             & \texttt{az}        & \texttt{azb}                              \\
        OSCAR             & \texttt{sh}        & \texttt{bs}, \texttt{hr}, \texttt{sr}     \\
        OSCAR             & \texttt{ku}        & \texttt{ckb}                              \\
        OSCAR             & \texttt{ms}        & \texttt{id}, \texttt{min}                 \\
        OSCAR             & \texttt{no}        & \texttt{nn}                               \\
        OSCAR             & \texttt{sq}        & \texttt{als}$^{*}$                        \\
        OSCAR             & \texttt{zh}        & \texttt{yue}, \texttt{wuu}                \\
        %  \midrule
        % Tatoeba & ar & acm,afb,ajp,apc,arq,ary,arz,ayl \\
        % Tatoeba & ber & kab \\
        % Tatoeba & et & vro \\
        % Tatoeba & ku & ckb,kmr,sdh \\
        % Tatoeba & lv & ltg \\
        % Tatoeba & sq & aln \\
        \midrule
        WikiMatrix        & \texttt{ar}        & \texttt{arz}                              \\
        WikiMatrix        & \texttt{sh}        & \texttt{bs}, \texttt{hr}, \texttt{sr}     \\
        WikiMatrix        & \texttt{zh}        & \texttt{wuu}                              \\
        \bottomrule
    \end{tabular}
    \caption{Situations where two language codes are represented, but one is a superset of another by the ISO standard, leading to unclarity about the data in the supercode dataset. $^{*}$The \texttt{als} dataset is actually in \texttt{gsw}.}
    \label{tab:supersets}
\end{table}


\begin{table}[th!]
    \centering
    \small
    \begin{tabular}{ll}
        \toprule
        \textbf{ Actual language} & \textbf{Code in JW300}                                                \\
        \midrule
        \texttt{cs}               & \texttt{cse}                                                          \\
        \texttt{de}               & \texttt{gsg}                                                          \\
        \texttt{el}               & \texttt{gss}                                                          \\
        \texttt{en}               & \texttt{ase}, \texttt{asf}, \texttt{bfi}, \texttt{ins}, \texttt{psp}, \\
                                  & \texttt{sfs}, \texttt{zib}, \texttt{zsl}                              \\
        \texttt{es}               & \texttt{aed}, \texttt{bvl}, \texttt{csf}, \texttt{csg}, \texttt{csn}, \\
                                  & \texttt{csr}, \texttt{ecs}, \texttt{esn}, \texttt{gsm}, \texttt{hds}, \\
                                  & \texttt{lsp}, \texttt{mfs}, \texttt{ncs}, \texttt{prl}, \texttt{pys}, \\
                                  & \texttt{ssp}, \texttt{vsl}                                            \\
        \texttt{fi}               & \texttt{fse}                                                          \\
        \texttt{fr}               & \texttt{fcs},\texttt{fsl}                                             \\
        \texttt{hu}               & \texttt{hsh}                                                          \\
        \texttt{id}               & \texttt{inl}                                                          \\
        \texttt{it}               & \texttt{ise}                                                          \\
        \texttt{ja}               & \texttt{jsl}                                                          \\
        \texttt{ko}               & \texttt{kvk}                                                          \\
        \texttt{pl}               & \texttt{pso}                                                          \\
        \texttt{pt}               & \texttt{bzs}, \texttt{mzy}, \texttt{psr}, \texttt{sgn\_AO}            \\
        \texttt{ro}               & \texttt{rms}                                                          \\
        \texttt{ru}               & \texttt{rsl}                                                          \\
        \texttt{sk}               & \texttt{svk}                                                          \\
        \texttt{sq}               & \texttt{sql}                                                          \\
        \texttt{st}               & \texttt{jw\_ssa}                                                      \\
        \texttt{zh}               & \texttt{csl}, \texttt{tss}                                            \\
        \bottomrule
    \end{tabular}
    \caption{There are 48 languages in the JW300 corpus with language codes that correspond to sign languages, but in reality are unrelated high-resource languages (usually the most spoken language in the country of origin of the sign language). This table shows the actual language of the data corresponding to each sign language code.} %  For instance, the \texttt{ase-en} parallel data is actually \texttt{en-en} parallel data (copied source and target).
    \label{tab:signlanguages}
\end{table}

\section{Details on Language Code Issues}
\label{app:jw300}

Table \ref{tab:supersets} provides a complete lists of the corpora where one code is defined as a superset of the other by the ISO standard, and in Table \ref{tab:signlanguages} we provide a complete list of the language codes in JW300 which purport to be sign language but are actually unrelated high-resource languages.



\begin{table}[th!]
    \centering\small
        \begin{tabular}{lll}


            \toprule
            \textbf{Code in JW300} & \textbf{BCP-47 code} & \textbf{Actual Language Name} \\
            \multicolumn{3}{c}{}                                                          \\
            \multicolumn{3}{c}{\textbf{Incorrect private-use extensions}}                 \\
            \midrule
            hy\_arevmda            & hyw                  & Western Armenian              \\
            jw\_dgr                & os\_x\_dgr           & Digor Ossetian                \\
            jw\_dmr                & naq\_x\_dmr          & Damara Khoekhoe               \\
            jw\_ibi                & yom\_x\_ibi          & Ibinda Kongo                  \\
            jw\_paa                & pap\_x\_paa          & Papiamento (Aruba)            \\
            jw\_qcs                & qxl                  & Salasaca Highland Kichwa      \\
            jw\_rmg                & rmn\_x\_rmg          & Greek Romani (South)          \\
            jw\_rmv                & rmy\_x\_rmv          & Vlax Romani, Russia           \\
            jw\_spl                & nso\_x\_spl          & Sepulana                      \\
            jw\_ssa                & st\_ZA               & Sesotho (South Africa)        \\
            jw\_tpo                & pt\_PT               & Portuguese (Portugal)         \\
            jw\_vlc                & ca\_x\_vlc           & Catalan (Valencia)            \\
            jw\_vz                 & skg\_x\_vz           & Vezo Malagasy                 \\
            rmy\_AR                & rmy\_x\_?            & Kalderash                     \\

            \multicolumn{3}{c}{}                                                          \\
            \multicolumn{3}{c}{\textbf{Equivalent codes used in place of extensions}}     \\
            \midrule
            kmr\_latn              & kmr\_x\_rdu          & Kurmanji (Caucasus)           \\
            nya                    & ny\_x\_?             & Chinyanja (Zambia)            \\
            que                    & qu\_x\_?             & Quechua (Ancash)              \\

            \multicolumn{3}{c}{}                                                          \\
            \multicolumn{3}{c}{\textbf{Deprecated codes}}                                 \\
            \midrule
            daf                    & dnj/lda              & Dan                           \\
            % sgn\_AO & 	pt & 	Portuguese \\ 

            \multicolumn{3}{c}{}                                                          \\
            \multicolumn{3}{c}{\textbf{ISO-693-3 used in place of ISO-693-2}}             \\
            \midrule
            cat                    & ca                   & Catalan                       \\
            gug                    & gn                   & Guarani                       \\
            run                    & rn                   & Kirundi                       \\
            tso\_MZ                & ts\_MZ               & Changana (Mozambique)         \\
            \bottomrule
        \end{tabular}%
    \caption{Language code issues in the JW300 datasets for 22 language varieties not covered by Tables \ref{tab:supersets} and \ref{tab:signlanguages}.
        %Twelve languages have codes starting in \texttt{jw\_}, suggesting they are varieties of Javanese, but are instead mis-parsed private-use extensions. Three codes appear in addition to equivalent ISO codes, making it unclear which languages they are. One language uses a deprecated ISO code. Four languages use the ISO639-3 code instead of the ISO639-2 code, and therefore are not BCP-47. (Note: in this table, 
        Private use extensions are given as they appear in \url{jw.org}, and specified as `?' if they are absent from \url{jw.org}.}
    \label{tab:jw300nonbcp}
\end{table}

Special attention needs to be given to the JW300 dataset, which, in addition to the sign languages and superset code issues, has a variety of other peculiarities. These problems seem to originate in the codes used by \url{jw.org},\footnote{The \url{jw.org} website seems to use correct BCP-47 extensions now, however, and entering a code such as ``jw\_dmr" redirects to ``naq\_x\_dmr".} which were apparently not checked in the creation of the JW300 dataset. An overview is provided in Table \ref{tab:jw300nonbcp}, and the following paragraphs give specifics.

Twelve languages in JW300 have codes starting in \texttt{jw\_}, suggesting they are varieties of Javanese (ISO639-1 \texttt{jw}), but are instead attempts to represent language dialects for which there are no BCP-47 codes. These codes seem to have been updated in \url{jw.org} to appropriate BCP-47 private-use extensions in the form \texttt{<supercode>\_x\_<tag>}, which are provided in Table \ref{tab:jw300nonbcp}.
Twelve languages have codes starting in \texttt{jw\_}, suggesting they are varieties of Javanese, but are instead mis-parsed private-use extensions. Three codes appear in addition to equivalent ISO codes, making it unclear which languages they are. One language uses a deprecated ISO code. Four languages use the ISO639-3 code instead of the ISO639-2 code, and therefore are not BCP-47.

In addition to the \texttt{jw\_} tags, there are two other mis-used private subtags: \texttt{hy\_arevmda}, which in addition to lacking the mandatory \texttt{\_x\_} appears to represent standard Western Armenian (\texttt{hyw}); and \texttt{rmy\_AR}, which, rather than being Romany from Argentina, is Kalderash Romany.

There are also a few anomalies where private use extensions should have been used but other methods were found to convey the distinctions. Three codes appear in addition to equivalent ISO codes, making it unclear which languages they are. Two of these are equivalencies between  ISO639-2 and  ISO639-3 (\texttt{nya} and \texttt{ny} are both Chichewa, \texttt{qu} and \texttt{que} are both Quechua), and one is a script equivalency (\texttt{kmr} and \texttt{kmr\_latn} are both in Latin script). In these three cases the two codes do represent different languages---so a private use extension would have been appropriate.

Finally, there is the more minor issue that three languages use the ISO639-3 code instead of the ISO639-2 code, and therefore are not BCP-47.


In addition to the JW300-specific errors, Table \ref{tab:misc_codes} summarizes miscellaneous errors in CCAligned and OSCAR 2019 that were detailed in Section \ref{sec:codes}.

\begin{table}[!th]
    \small
    \centering
    \begin{tabular}{lll}
        \toprule
        \textbf{Dataset} & \textbf{Code in Corpus} & \textbf{Correct Code} \\
        \midrule
        CCAligned        & \texttt{zz}             & \texttt{zza}          \\
        CCAligned        & \texttt{sz}             & \texttt{szl}          \\
        CCAligned        & \texttt{ns}             & \texttt{nso}          \\
        CCAligned        & \texttt{cb}             & \texttt{ckb}          \\
        CCAligned        & \texttt{tz}             & \texttt{ber}          \\
        CCAligned        & \texttt{qa}             & \texttt{shn}          \\
        CCAligned        & \texttt{qd}             & \texttt{kac}          \\
        CCAligned        & \texttt{cx}             & \texttt{ceb}          \\
        \midrule
        mC4              & \texttt{iw}             & \texttt{he}           \\
        \midrule
        OSCAR            & \texttt{eml}            & \texttt{egl}          \\
        OSCAR            & \texttt{als}            & \texttt{gsw}          \\
        OSCAR            & \texttt{sh}             & \texttt{hbs}          \\
        \midrule
        WikiMatrix       & \texttt{sh}             & \texttt{hbs}          \\
        \bottomrule
    \end{tabular}
    \caption{Miscellaneous errors in language codes.}
    \label{tab:misc_codes}
\end{table}







\section{Complete Error Taxonomy and Instructions}~\label{app:taxonomy}
In addition to the examples given in Table \ref{tab:examples}, raters were provided with the following verbal notes on the error codes:
\begin{itemize}
    \item \textbf{\texttt{CC}: Correct translation, natural sentence:} It's OK if it's a sentence fragment instead of a whole sentence, as long as it is not too short (about 5 words or greater). The translation does not have to be perfect.
    \item \textbf{\texttt{\texttt{CS}}: Correct Translation, but single word or short phrase:} Also includes highly repeated short phrases, like ``the cat the cat the cat the cat the cat ..."
    \item \textbf{\texttt{CB}: Correct translation, but boilerplate: } This can be auto-generated or formulaic content, or content that one deems ``technically correct but generally not very useful to NLP models". Unfortunately, it's often not clear what should be counted as boilerplate...do your best.
    \item \textbf{\texttt{X}: Incorrect translation} [for parallel sentences] both source and target are in the correct language, but they are not adequate translations.
    \item \textbf{\texttt{WL}: Wrong language} For short sentences, especially with proper nouns, there is often a fine line between ``Wrong language" and ``Not language". Do your best.
    \item \textbf{\texttt{NL}: Not language} At least one of source and target are not linguistic content. Any sentence consisting only of a proper noun (e.g. ``Tyrone Ping") should be marked as \texttt{NL}.
    \item \textbf{\texttt{U}: Unknown} for sentences that need verification by a native speaker. This is an auxiliary label that is resolved in most cases.
\end{itemize}







\section{Methodological Notes}\label{app:strategies}

A surprising amount of work can be done without being an expert in the languages involved. The easiest approach is simply to search the internet for the sentence, which usually results in finding the exact page the sentence came from, which in turn frequently contains clues like language codes in the URL, or a headline like \textit{News in X language}, sometimes with references to a translated version of the same page. However, for the cases where this is insufficient, here are a few tips, tricks, and observations.

\paragraph{No Skills Required:}
Things that do not require knowledge of the language(s) in question.
\begin{enumerate}
    \item ``Not language'' can usually be identified by anyone who can read the script, though there are tricky cases with proper nouns.
    \item Frequently, ``parallel" sentences contain different numbers in the source and target (especially autogenerated content), and are easy to disqualify.
    \item Errors tend to repeat. If a word is mistranslated once, it will often be mistranslated many more times throughout a corpus, making it easy to spot.
\end{enumerate}

\paragraph{Basic Research Required:}
Things that do not require knowledge of the language(s) in question but can be done with basic research.
\begin{enumerate}
    \item If it's written in the wrong script it's considered wrong language. (Sometimes the writing system is indicated in the published corpus, e.g. \texttt{bg-Latn}, but usually the language has a ``default" script defined by ISO.)
    \item Some types of texts come with inherent labels or markers, such as enumerators or verse numbers.
          %For example, much of CCAligned's Odia text is Christian Bible verses, which are preceded by an identifier like ``Matt 12:37". 
    \item When all else fails, search the internet for the whole sentence or n-grams thereof! If the whole sentence can be found, frequently the language is betrayed by the web page (the language's autonym is useful in this case).
\end{enumerate}


\section{Complete Audit Results}\label{app:stats}
Table for \ref{tab:oscar-full} give the complete annotation percentages for OSCAR 2019. For each annotation label, we report the ratio of the annotated sentences (of max 100 sentences) that were assigned that label by the primary annotator. Repeated annotations done for agreement measurement are not included. The \texttt{C} column aggregates all correct sub-codes (\texttt{CC}, \texttt{CS}, \texttt{CB}). We also report the total number of sentences that each dataset contains for each language and the average sentence length for the audited sentences to illustrate differences across languages. The original language codes as they are published with the datasets are maintained for the sake of consistency (but should be handled with care in future work, see Section~\ref{sec:codes}), and those with less than 20\% correct sentences are highlighted. For the complete audit results for the other 4 datasets, please refer to the original \citet{kreutzer-etal-2021-quality} work.

\input{sources/appendix/oscar/full_tables}
